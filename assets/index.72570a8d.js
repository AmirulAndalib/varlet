import{R as A}from"./index.724ce894.js";import{I as J}from"./index.a5003ade.js";import{B as K}from"./index.29b5ff5e.js";import{d as M,a as t,b as Y,w as Z,_ as q,s as F,ab as G,f as a,h as l,j as Q,H as o,K as g,J as u,l as H,k as d,n as X,N as I,t as V,P as _,ac as x}from"./elevation.f115f7e1.js";import{t as h,h as ee}from"./elements.27240eb2.js";import{c as te,a as oe}from"./components.5cbda08a.js";import{u as ae}from"./zIndex.7e8071f2.js";import{u as le}from"./lock.d25ca9a9.js";function ie(e){return["fill","contain","cover","none","scale-down"].includes(e)}const ne={src:{type:String},fit:{type:String,validator:ie,default:"cover"},height:{type:[String,Number]},imageHeight:{type:[String,Number]},imageWidth:{type:[String,Number]},layout:{type:String,default:"column"},floating:{type:Boolean,default:!1},"onUpdate:floating":{type:Function},floatingDuration:{type:Number,default:250},alt:{type:String},title:{type:String},subtitle:{type:String},description:{type:String},elevation:{type:[Number,String]},ripple:{type:Boolean,default:!1},onClick:{type:Function}};const{n:se,classes:re}=te("card"),ue=500,de=M({name:"VarCard",directives:{Ripple:A},components:{VarIcon:J,VarButton:K},props:ne,setup(e){const m=t(null),T=t(null),v=t("auto"),f=t("auto"),p=t("100%"),r=t("100%"),i=t("auto"),n=t("auto"),s=t(void 0),y=t("hidden"),w=t(void 0),b=t("0px"),$=t("0"),{zIndex:L}=ae(()=>e.floating,1),k=Y(()=>e.layout==="row"),S=t(!1),C=t(!1);le(()=>e.floating,()=>k);let D="auto",B="auto",z=null;const c=t(null),W=async()=>{clearTimeout(c.value),clearTimeout(z),c.value=null,c.value=setTimeout(async()=>{const{width:R,height:E,left:j,top:O}=m.value.getBoundingClientRect();v.value=h(R),f.value=h(E),p.value=v.value,r.value=f.value,i.value=h(O),n.value=h(j),s.value="fixed",D=i.value,B=n.value,S.value=!0,await ee(),i.value="0",n.value="0",p.value="100vw",r.value="100vh",b.value="auto",$.value="1",y.value="auto",w.value="0px",C.value=!0},e.ripple?ue:0)},P=()=>{clearTimeout(z),clearTimeout(c.value),c.value=null,p.value=v.value,r.value=f.value,i.value=D,n.value=B,w.value=void 0,b.value="0px",$.value="0",S.value=!1,z=setTimeout(()=>{v.value="auto",f.value="auto",p.value="100%",r.value="100%",i.value="auto",n.value="auto",D="auto",B="auto",y.value="hidden",s.value=void 0,C.value=!1},e.floatingDuration)},U=()=>{oe(e["onUpdate:floating"],!1)};return Z(()=>e.floating,R=>{k.value||X(()=>{R?W():P()})},{immediate:!0}),{n:se,classes:re,toSizeUnit:h,card:m,cardFloater:T,holderWidth:v,holderHeight:f,floater:c,floaterWidth:p,floaterHeight:r,floaterTop:i,floaterLeft:n,floaterPosition:s,floaterOverflow:y,floaterBorderRadius:w,contentHeight:b,opacity:$,zIndex:L,isRow:k,close:U,showFloatingButtons:S,floated:C}}}),ve=["src","alt"];function fe(e,m,T,v,f,p){const r=F("var-icon"),i=F("var-button"),n=G("ripple");return a(),l("div",{ref:"card",class:o(e.classes(e.n(),[e.isRow,e.n("--layout-row")])),onClick:m[0]||(m[0]=(...s)=>e.onClick&&e.onClick(...s))},[Q((a(),l("div",{ref:"cardFloater",class:o(e.classes(e.n("floater"),[e.elevation,`var-elevation--${e.elevation}`,"var-elevation--1"])),style:g({width:e.floaterWidth,height:e.floaterHeight,top:e.floaterTop,left:e.floaterLeft,overflow:e.floaterOverflow,position:e.floaterPosition,borderRadius:e.floaterBorderRadius,zIndex:e.floated?e.zIndex:void 0,transition:e.floated?`background-color ${e.floatingDuration}ms, border-radius ${e.floatingDuration}ms, width ${e.floatingDuration}ms, height ${e.floatingDuration}ms, top ${e.floatingDuration}ms, left ${e.floatingDuration}ms`:void 0})},[u(e.$slots,"image",{},()=>{var s;return[e.src?(a(),l("img",{key:0,class:o(e.n("image")),style:g({objectFit:e.fit,height:e.toSizeUnit((s=e.imageHeight)!=null?s:e.height),width:e.toSizeUnit(e.imageWidth)}),src:e.src,alt:e.alt},null,14,ve)):d("v-if",!0)]}),H("div",{class:o(e.n("container"))},[u(e.$slots,"title",{},()=>[e.title?(a(),l("div",{key:0,class:o(e.n("title"))},I(e.title),3)):d("v-if",!0)]),u(e.$slots,"subtitle",{},()=>[e.subtitle?(a(),l("div",{key:0,class:o(e.n("subtitle"))},I(e.subtitle),3)):d("v-if",!0)]),u(e.$slots,"description",{},()=>[e.description?(a(),l("div",{key:0,class:o(e.n("description"))},I(e.description),3)):d("v-if",!0)]),e.$slots.extra?(a(),l("div",{key:0,class:o(e.n("footer"))},[u(e.$slots,"extra")],2)):d("v-if",!0),e.$slots.content&&!e.isRow?(a(),l("div",{key:1,class:o(e.n("content")),style:g({height:e.contentHeight,opacity:e.opacity,transition:`opacity ${e.floatingDuration*2}ms`})},[u(e.$slots,"content")],6)):d("v-if",!0)],2),e.showFloatingButtons?(a(),l("div",{key:0,class:o(e.classes(e.n("floating-buttons"),"var--box")),style:g({zIndex:e.zIndex,opacity:e.opacity,transition:`opacity ${e.floatingDuration*2}ms`})},[u(e.$slots,"close-button",{},()=>[V(i,{size:"large",round:"",class:o(e.classes(e.n("close-button"),"var-elevation--6")),onClick:x(e.close,["stop"])},{default:_(()=>[V(r,{name:"window-close"})]),_:1},8,["class","onClick"])])],6)):d("v-if",!0)],6)),[[n,{disabled:!e.ripple||e.floater}]]),H("div",{class:o(e.n("holder")),style:g({width:e.holderWidth,height:e.holderHeight})},null,6)],2)}var N=q(de,[["render",fe]]);N.install=function(e){e.component(N.name,N)};export{N as C};
