import{p as U,S as ee}from"./index.13a9b249.js";import{d as O,a as s,b as l,w as A,o as te,u as ae,G as oe,X as ne,_ as Z,f as G,i as ie,S as se,M as Y,N as V,O as j,R as q,m as le,aE as re,ag as ce,D as de,h as ue}from"./vue-router.esm-bundler.0e2db2be.js";import{p as H,d as w,u as fe,a as ve,c as F,f as k,b as me,e as be}from"./components.e153d5f1.js";import{l as K}from"./shared.1ad63abb.js";import{a as ye,e as R,d as pe}from"./elements.fe3d8f92.js";import{R as Ce}from"./index.cae111d6.js";function X(e){return["horizontal","vertical"].includes(e)}const he={active:{type:[String,Number],default:0},layoutDirection:{type:String,default:"horizontal",validator:X},itemDirection:{type:String,default:"horizontal",validator:X},fixedBottom:{type:Boolean,default:!1},activeColor:{type:String},inactiveColor:{type:String},disabledColor:{type:String},color:{type:String},indicatorColor:{type:String},indicatorSize:{type:[String,Number]},elevation:{type:Boolean,default:!1},sticky:{type:Boolean,default:!1},stickyCssMode:H(U,"cssMode"),stickyZIndex:H(U,"zIndex"),offsetTop:H(U,"offsetTop"),safeArea:{type:Boolean,default:!1},onClick:w(),onChange:w(),"onUpdate:active":w()},J=Symbol("TABS_BIND_TAB_KEY"),Q=Symbol("TABS_COUNT_TAB_KEY");function $e(){const{childProviders:e,bindChildren:o}=ve(J),{length:i}=fe(Q);return{length:i,tabList:e,bindTabList:o}}const{n:Te,classes:ke}=F("tabs"),Se=O({name:"VarTabs",components:{VarSticky:ee},inheritAttrs:!1,props:he,setup(e){const o=s("0px"),i=s("0px"),f=s("0px"),v=s("0px"),n=s(!1),m=s(null),p=l(()=>e.active),E=l(()=>e.activeColor),r=l(()=>e.inactiveColor),S=l(()=>e.disabledColor),g=l(()=>e.itemDirection),C=s(null),{tabList:h,bindTabList:z,length:c}=$e(),N=a=>{var W;const t=(W=a.name.value)!=null?W:a.index.value,{active:y,onChange:T,onClick:x}=e;k(e["onUpdate:active"],t),k(x,t),t!==y&&k(T,t)},P=()=>h.find(({name:a})=>e.active===a.value),B=a=>h.find(({index:t})=>(a!=null?a:e.active)===t.value),d=()=>{if(c.value===0)return;const{active:a}=e;if(ne(a)){const t=a>c.value-1?c.value-1:0;return k(e["onUpdate:active"],t),B(t)}},u=()=>{n.value=h.length>=5},$=({element:a})=>{const t=a.value;e.layoutDirection==="horizontal"?(o.value=`${t==null?void 0:t.offsetWidth}px`,f.value=`${t==null?void 0:t.offsetLeft}px`):(i.value=`${t==null?void 0:t.offsetHeight}px`,v.value=`${t==null?void 0:t.offsetTop}px`)},L=({element:a})=>{if(!n.value)return;const t=m.value,y=a.value;if(e.layoutDirection==="horizontal"){const T=y.offsetLeft+y.offsetWidth/2-t.offsetWidth/2;R(t,{left:T,animation:K})}else{const T=y.offsetTop+y.offsetHeight/2-t.offsetHeight/2;R(t,{top:T,animation:K})}},b=()=>{const a=P()||B()||d();!a||a.disabled.value||(u(),$(a),L(a))},_=async()=>{e.sticky&&C.value&&await C.value.resize()};return z({active:p,activeColor:E,inactiveColor:r,disabledColor:S,itemDirection:g,resize:b,onTabClick:N}),A(()=>c.value,async()=>{await pe(),b()}),A(()=>e.active,b),te(()=>window.addEventListener("resize",b)),ae(()=>window.removeEventListener("resize",b)),{stickyComponent:C,indicatorWidth:o,indicatorHeight:i,indicatorX:f,indicatorY:v,scrollable:n,scrollerEl:m,Transition:oe,toSizeUnit:ye,n:Te,classes:ke,resize:b,resizeSticky:_}}});function ge(e,o,i,f,v,n){return G(),ie(re(e.sticky?e.n("$-sticky"):e.Transition),{ref:e.sticky?"stickyComponent":void 0,"css-mode":e.sticky?e.stickyCssMode:void 0,"offset-top":e.sticky?e.offsetTop:void 0,"z-index":e.sticky?e.stickyZIndex:void 0},{default:se(()=>[Y("div",le({class:e.classes(e.n(),e.n("$--box"),e.n(`--item-${e.itemDirection}`),e.n(`--layout-${e.layoutDirection}-padding`),[e.elevation,e.n("$-elevation--4")],[e.fixedBottom,e.n("--fixed-bottom")],[e.safeArea,e.n("--safe-area")]),style:{background:e.color}},e.$attrs),[Y("div",{ref:"scrollerEl",class:V(e.classes(e.n("tab-wrap"),[e.scrollable,e.n(`--layout-${e.layoutDirection}-scrollable`)],e.n(`--layout-${e.layoutDirection}`)))},[j(e.$slots,"default"),Y("div",{class:V(e.classes(e.n("indicator"),e.n(`--layout-${e.layoutDirection}-indicator`))),style:q({width:e.layoutDirection==="horizontal"?e.indicatorWidth:e.toSizeUnit(e.indicatorSize),height:e.layoutDirection==="horizontal"?e.toSizeUnit(e.indicatorSize):e.indicatorHeight,transform:e.layoutDirection==="horizontal"?`translateX(${e.indicatorX})`:`translateY(${e.indicatorY})`,background:e.indicatorColor||e.activeColor})},null,6)],2)],16)]),_:3},8,["css-mode","offset-top","z-index"])}const I=Z(Se,[["render",ge]]);I.install=function(e){e.component(I.name,I)};const ze={name:{type:[String,Number]},disabled:{type:Boolean,default:!1},onClick:w()};function Be(){const{parentProvider:e,bindParent:o}=me(J),{index:i}=be(Q);if(!e||!o||!i)throw Error("<var-tab/> must in <var-tabs/>");return{index:i,tabs:e,bindTabs:o}}const{n:D,classes:De}=F("tab"),we=O({name:"VarTab",directives:{Ripple:Ce},props:ze,setup(e){const o=s(null),i=l(()=>e.name),f=l(()=>e.disabled),v=l(()=>o.value),{index:n,tabs:m,bindTabs:p}=Be(),{onTabClick:E,active:r,activeColor:S,inactiveColor:g,disabledColor:C,itemDirection:h,resize:z}=m,c={name:i,index:n,disabled:f,element:v};p(c);const N=()=>{const{disabled:d,name:u}=e;return d?C.value:r.value===u||r.value===(n==null?void 0:n.value)?S.value:g.value},P=()=>{const{disabled:d,name:u}=e;return d?D("$-tab--disabled"):r.value===u||r.value===(n==null?void 0:n.value)?D("$-tab--active"):D("$-tab--inactive")},B=d=>{const{disabled:u,name:$,onClick:L}=e;u||(k(L,$!=null?$:n.value,d),E(c))};return A(()=>e.name,z),A(()=>e.disabled,z),{n:D,classes:De,tabEl:o,active:r,activeColor:S,inactiveColor:g,itemDirection:h,computeColorStyle:N,computeColorClass:P,handleClick:B}}});function Ae(e,o,i,f,v,n){const m=ce("ripple");return de((G(),ue("div",{class:V(e.classes(e.n(),e.n("$--box"),e.computeColorClass(),e.n(`--${e.itemDirection}`))),ref:"tabEl",style:q({color:e.computeColorStyle()}),onClick:o[0]||(o[0]=(...p)=>e.handleClick&&e.handleClick(...p))},[j(e.$slots,"default")],6)),[[m,{disabled:e.disabled}]])}const M=Z(we,[["render",Ae]]);M.install=function(e){e.component(M.name,M)};export{M as T,I as a};
