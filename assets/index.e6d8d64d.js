import{R as j}from"./index.6be596f4.js";import{I as A}from"./index.bc7fb00c.js";import{B as J}from"./index.fd5701ad.js";import{d as K,a as o,b as M,w as Y,_ as Z,t as R,ab as q,h as a,i as l,k as G,H as t,K as g,J as s,p as F,l as u,n as Q,N as B,x as H,P as X,ac as _}from"./elevation.ecb899cd.js";import{t as h,h as x}from"./elements.f685cff6.js";import{c as ee,a as oe}from"./components.27c76418.js";import{u as te}from"./zIndex.eb710bf9.js";import{u as ae}from"./lock.c04c7bdf.js";function le(e){return["fill","contain","cover","none","scale-down"].includes(e)}const ie={src:{type:String},fit:{type:String,validator:le,default:"cover"},height:{type:[String,Number]},width:{type:[String,Number]},layout:{type:String,default:"column"},floating:{type:Boolean,default:!1},"onUpdate:floating":{type:Function},floatingDuration:{type:Number,default:250},alt:{type:String},title:{type:String},subtitle:{type:String},description:{type:String},elevation:{type:[Number,String]},ripple:{type:Boolean,default:!1},onClick:{type:Function}};const{n:ne,classes:se}=ee("card"),re=500,ue=K({name:"VarCard",directives:{Ripple:j},components:{VarIcon:A,VarButton:J},props:ie,setup(e){const c=o(null),N=o(null),d=o("auto"),v=o("auto"),f=o("100%"),r=o("100%"),i=o("auto"),n=o("auto"),m=o("static"),y=o("hidden"),w=o("0px"),b=o("0"),{zIndex:V}=te(()=>e.floating,1),$=M(()=>e.layout==="row"),k=o(!1),C=o(!1);ae(()=>e.floating,()=>$);let S="auto",D="auto",z=null;const p=o(null),L=async()=>{clearTimeout(p.value),clearTimeout(z),p.value=null,p.value=setTimeout(async()=>{const{width:T,height:W,left:E,top:O}=c.value.getBoundingClientRect();d.value=h(T),v.value=h(W),f.value=d.value,r.value=v.value,i.value=h(O),n.value=h(E),m.value="fixed",S=i.value,D=n.value,k.value=!0,await x(),i.value="0",n.value="0",f.value="100vw",r.value="100vh",w.value="auto",b.value="1",y.value="auto",C.value=!0},e.ripple?re:0)},P=()=>{clearTimeout(z),clearTimeout(p.value),p.value=null,f.value=d.value,r.value=v.value,i.value=S,n.value=D,w.value="0px",b.value="0",k.value=!1,z=setTimeout(()=>{d.value="auto",v.value="auto",f.value="100%",r.value="100%",i.value="auto",n.value="auto",S="auto",D="auto",y.value="hidden",m.value="static",C.value=!1},e.floatingDuration)},U=()=>{oe(e["onUpdate:floating"],!1)};return Y(()=>e.floating,T=>{$.value||Q(()=>{T?L():P()})},{immediate:!0}),{n:ne,classes:se,toSizeUnit:h,card:c,cardFloater:N,holderWidth:d,holderHeight:v,floater:p,floaterWidth:f,floaterHeight:r,floaterTop:i,floaterLeft:n,floaterPosition:m,floaterOverflow:y,contentHeight:w,opacity:b,zIndex:V,isRow:$,close:U,showToolBar:k,floated:C}}}),de=["src","alt"];function ve(e,c,N,d,v,f){const r=R("var-icon"),i=R("var-button"),n=q("ripple");return a(),l("div",{ref:"card",class:t(e.classes(e.n(),[e.isRow,e.n("--layout-row")])),onClick:c[0]||(c[0]=(...m)=>e.onClick&&e.onClick(...m))},[G((a(),l("div",{ref:"cardFloater",class:t(e.classes(e.n("floater"),[e.elevation,`var-elevation--${e.elevation}`,"var-elevation--1"])),style:g({width:e.floaterWidth,height:e.floaterHeight,top:e.floaterTop,left:e.floaterLeft,overflow:e.floaterOverflow,position:e.floaterPosition,borderRadius:e.floating?"0px":void 0,zIndex:e.floated?e.zIndex:void 0,transition:e.floated?`background-color ${e.floatingDuration}ms, border-radius ${e.floatingDuration}ms, width ${e.floatingDuration}ms, height ${e.floatingDuration}ms, top ${e.floatingDuration}ms, left ${e.floatingDuration}ms`:void 0})},[s(e.$slots,"image",{},()=>[e.src?(a(),l("img",{key:0,class:t(e.n("image")),style:g({objectFit:e.fit,height:e.toSizeUnit(e.height),width:e.toSizeUnit(e.width)}),src:e.src,alt:e.alt},null,14,de)):u("v-if",!0)]),F("div",{class:t(e.n("container"))},[s(e.$slots,"title",{},()=>[e.title?(a(),l("div",{key:0,class:t(e.n("title"))},B(e.title),3)):u("v-if",!0)]),s(e.$slots,"subtitle",{},()=>[e.subtitle?(a(),l("div",{key:0,class:t(e.n("subtitle"))},B(e.subtitle),3)):u("v-if",!0)]),s(e.$slots,"description",{},()=>[e.description?(a(),l("div",{key:0,class:t(e.n("description"))},B(e.description),3)):u("v-if",!0)]),e.$slots.extra?(a(),l("div",{key:0,class:t(e.n("footer"))},[s(e.$slots,"extra")],2)):u("v-if",!0),e.$slots.content&&!e.isRow?(a(),l("div",{key:1,class:t(e.n("content")),style:g({height:e.contentHeight,opacity:e.opacity,transition:`opacity ${e.floatingDuration*2}ms`})},[s(e.$slots,"content")],6)):u("v-if",!0)],2),e.showToolBar?(a(),l("div",{key:0,class:t(e.classes(e.n("toolbar"),"var--box")),style:g({zIndex:e.zIndex,opacity:e.opacity,transition:`opacity ${e.floatingDuration*2}ms`})},[s(e.$slots,"toolbar-close",{},()=>[H(i,{size:"large",round:"",class:t(e.classes(e.n("toolbar-close"),"var-elevation--6")),onClick:_(e.close,["stop"])},{default:X(()=>[H(r,{name:"window-close",size:"24px"})]),_:1},8,["class","onClick"])]),s(e.$slots,"toolbar-extra")],6)):u("v-if",!0)],6)),[[n,{disabled:!e.ripple||e.floater}]]),F("div",{class:t(e.n("holder")),style:g({width:e.holderWidth,height:e.holderHeight})},null,6)],2)}var I=Z(ue,[["render",ve]]);I.install=function(e){e.component(I.name,I)};export{I as C};
