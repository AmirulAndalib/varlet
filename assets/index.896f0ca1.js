var P=Object.defineProperty;var f=Object.getOwnPropertySymbols;var R=Object.prototype.hasOwnProperty,z=Object.prototype.propertyIsEnumerable;var k=(e,n,o)=>n in e?P(e,n,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[n]=o,w=(e,n)=>{for(var o in n||(n={}))R.call(n,o)&&k(e,o,n[o]);if(f)for(var o of f(n))z.call(n,o)&&k(e,o,n[o]);return e};import{R as V}from"./index.b46dfe04.js";import{p as I,P as U}from"./index.dabaa0d7.js";import{I as A}from"./index.77ddcccb.js";import{p as F,g as N,m as D}from"./components.c8fd2e49.js";import{g as T,h as j}from"./shared.a49e593a.js";import{p as q}from"./en-US.628e0d34.js";import{_ as E}from"./elevation.229458c1.js";import{d as G,r as H,y as L,e as S,f as J,o as d,l as g,j as K,a as h,G as O,H as $,p as m,t as b,c as B,k as M,w as Q,n as W,h as X,F as Y,q as Z,z as _}from"./vendor.49f89f0d.js";const x=w({show:{type:Boolean,default:!1},actions:{type:Array,default:()=>[]},title:{type:String},closeOnClickAction:{type:Boolean,default:!0},onSelect:{type:Function},"onUpdate:show":{type:Function}},F(I,["overlay","overlayClass","overlayStyle","lockScroll","closeOnClickOverlay","teleport","onOpen","onClose","onOpened","onClosed","onClickOverlay","onRouteChange"]));const ee=G({name:"VarActionSheet",directives:{Ripple:V},components:{VarPopup:U,VarIcon:A},inheritAttrs:!1,props:x,setup(e){const{n,classes:o}=N("action-sheet"),i=H(!1),s=a=>{var c;if(a.disabled)return;const{closeOnClickAction:v,onSelect:p}=e;p==null||p(a),v&&((c=e["onUpdate:show"])==null||c.call(e,!1))};return L(()=>e.show,a=>{i.value=a},{immediate:!0}),{n,classes:o,popupShow:i,pack:q,dt:T,handleSelect:s}}}),oe=["onClick"];function ne(e,n,o,i,s,a){const v=S("var-icon"),p=S("var-popup"),c=J("ripple");return d(),g(p,$({class:e.n("popup-radius"),position:"bottom",overlay:e.overlay,"overlay-class":e.overlayClass,"overlay-style":e.overlayStyle,"lock-scroll":e.lockScroll,"close-on-click-overlay":e.closeOnClickOverlay,teleport:e.teleport,show:e.popupShow},{"onUpdate:show":l=>{var y,C;return(C=(y=e.$props)["onUpdate:show"])==null?void 0:C.call(y,l)}},{onOpen:e.onOpen,onClose:e.onClose,onClosed:e.onClosed,onOpened:e.onOpened,onRouteChange:e.onRouteChange}),{default:K(()=>[h("div",$({class:e.classes(e.n(),e.n("box",!0))},e.$attrs),[O(e.$slots,"title",{},()=>[h("div",{class:m(e.n("title"))},b(e.dt(e.title,e.pack.actionSheetTitle)),3)]),O(e.$slots,"actions",{},()=>[(d(!0),B(Y,null,M(e.actions,l=>Q((d(),B("div",{class:m(e.classes(e.n("action-item"),l.className,l.disabled&&e.n("","disabled"))),key:l.name,style:W({color:l.color}),onClick:y=>e.handleSelect(l)},[l.icon?(d(),g(v,{key:0,class:m(e.n("action-icon")),"var-action-sheet-cover":"",name:l.icon,size:l.iconSize},null,8,["class","name","size"])):X("v-if",!0),h("div",{class:m(e.n("action-name"))},b(l.name),3)],14,oe)),[[c,{disabled:l.disabled}]])),128))])],16)]),_:3},16,["class","overlay","overlay-class","overlay-style","lock-scroll","close-on-click-overlay","teleport","show","onOpen","onClose","onClosed","onOpened","onRouteChange"])}var r=E(ee,[["render",ne]]);let t;function u(e){return j()?new Promise(n=>{u.close();const o=Z(e);o.teleport="body",t=o;const{unmountInstance:i}=D(r,o,{onSelect:s=>{var a;(a=o.onSelect)==null||a.call(o,s),n(s)},onClose:()=>{var s;(s=o.onClose)==null||s.call(o),n("close")},onClosed:()=>{var s;(s=o.onClosed)==null||s.call(o),i(),t===o&&(t=null)},onRouteChange:()=>{i(),t===o&&(t=null)},"onUpdate:show":s=>{o.show=s}});o.show=!0}):Promise.resolve()}u.Component=r;r.install=function(e){e.component(r.name,r)};u.close=()=>{if(t!=null){const e=t;t=null,_().then(()=>{e.show=!1})}};u.install=function(e){e.component(r.name,r)};export{u as A};
