import{M as _}from"./index.8c22ad6b.js";import{R as ee}from"./index.08cd40ac.js";import{I as ae}from"./index.753ed6d4.js";import{C as le}from"./index.1c28da35.js";import{I as se}from"./index.c22cb484.js";import{d as ie,a as k,Z as t,b as M,w as K,X as E,_ as ne,p as N,ag as oe,f as m,h as f,D as I,N as r,O as L,q as y,aP as O,M as w,P as B,Q as g,F as Q,ai as R,S as F,i as ue,j as q}from"./vue-router.esm-bundler.5eeb4635.js";import{p as te}from"./index.0701778a.js";import{c as re,f as H}from"./components.011f3236.js";const de={current:{type:[Number,String]},size:{type:[Number,String],default:10},total:{type:[Number,String],default:0},maxPagerCount:{type:Number,default:3},disabled:{type:Boolean,default:!1},simple:{type:Boolean,default:!0},showSizeChanger:{type:Boolean,default:!0},showQuickJumper:{type:Boolean,default:!1},sizeOption:{type:Array,default:()=>[10,20,50,100]},showTotal:{type:Function},onChange:{type:Function},"onUpdate:current":{type:Function},"onUpdate:size":{type:Function}},{n:me,classes:pe}=re("pagination"),ve=ie({name:"VarPagination",components:{VarMenu:_,VarIcon:ae,VarCell:le,VarInput:se},directives:{Ripple:ee},props:de,setup(e){const s=k(!1),S=k(""),h=k("1"),P=k(!1),z=k(!1),i=k(t(e.current)||1),p=k(t(e.size)||10),C=k([]),c=M(()=>Math.ceil(e.maxPagerCount/2)),n=M(()=>Math.ceil(t(e.total)/t(p.value))),l=M(()=>{const a=p.value*(i.value-1)+1,u=Math.min(p.value*i.value,t(e.total));return[a,u]}),b=M(()=>e.showTotal?e.showTotal(t(e.total),l.value):""),T=(a,u)=>E(a)?!1:u===1?P.value:z.value,j=(a,u)=>E(a)?"basic":u===1?"head":"tail",A=(a,u)=>{a===i.value||e.disabled||(E(a)?i.value=a:a==="prev"?i.value>1&&(i.value-=1):a==="next"?i.value<n.value&&(i.value+=1):a==="..."&&(u===1?i.value=Math.max(i.value-e.maxPagerCount,1):i.value=Math.min(i.value+e.maxPagerCount,n.value)))},X=()=>{e.disabled||(s.value=!0)},Z=a=>{p.value=a,s.value=!1},J=a=>/^[1-9][0-9]*$/.test(a),G=(a,u,$)=>{if($.target.blur(),J(u)){let V=t(u);V>n.value&&(V=n.value,h.value=`${V}`),V!==i.value&&(i.value=V)}a==="quick"&&(S.value=""),a==="simple"&&!J(u)&&(h.value=`${i.value}`)};return K([()=>e.current,()=>e.size],([a,u])=>{i.value=t(a)||1,p.value=t(u||10)}),K([i,p],([a,u],[$,V])=>{if(a>n.value){i.value=n.value;return}let d=[];const{maxPagerCount:v,total:W,onChange:Y}=e,x=Math.ceil(t(W)/t(V)),U=n.value-(v-c.value)-1;if(h.value=`${a}`,n.value-2>v){if($===void 0||n.value!==x)for(let o=2;o<v+2;o++)d.push(o);if(a<=v&&a<U){d=[];for(let o=1;o<v+1;o++)d.push(o+1);P.value=!0,z.value=!1}if(a>v&&a<U){d=[];for(let o=1;o<v+1;o++)d.push(a+o-c.value);P.value=a===2&&v===1,z.value=!1}if(a>=U){d=[];for(let o=1;o<v+1;o++)d.push(n.value-(v-o)-1);P.value=!1,z.value=!0}d=[1,"...",...d,"...",n.value]}else for(let o=1;o<=n.value;o++)d.push(o);C.value=d,$!==void 0&&n.value>0&&H(Y,a,u),H(e["onUpdate:current"],a),H(e["onUpdate:size"],u)},{immediate:!0}),{n:me,classes:pe,pack:te,current:i,menuVisible:s,size:p,pageCount:n,pageList:C,inputValue:S,simpleValue:h,totalText:b,getMode:j,isHideEllipsis:T,clickItem:A,showMenu:X,clickSize:Z,setPage:G,toNumber:t}}});const fe=["item-mode","onClick"];function ge(e,s,S,h,P,z){const i=N("var-icon"),p=N("var-input"),C=N("var-cell"),c=N("var-menu"),n=oe("ripple");return m(),f("ul",{class:r(e.n())},[I((m(),f("li",{class:r(e.classes(e.n("item"),e.n("prev"),[e.current<=1||e.disabled,e.n("item--disabled")],[e.simple,e.n("item--simple"),e.n("$-elevation--2")])),onClick:s[0]||(s[0]=l=>e.clickItem("prev"))},[L(e.$slots,"prev",{},()=>[y(i,{name:"chevron-left"})])],2)),[[n,{disabled:e.current<=1||e.disabled}]]),e.simple?(m(),f("li",{key:0,class:r(e.classes(e.n("simple"),[e.disabled,e.n("item--disabled")]))},[y(p,{modelValue:e.simpleValue,"onUpdate:modelValue":s[1]||(s[1]=l=>e.simpleValue=l),disabled:e.disabled,"var-pagination-cover":"",onBlur:s[2]||(s[2]=l=>e.setPage("simple",e.simpleValue,l)),onKeydown:s[3]||(s[3]=O(l=>e.setPage("simple",e.simpleValue,l),["enter"]))},null,8,["modelValue","disabled"]),w("span",null,[B(" / "+g(e.pageCount)+" ",1),w("div",{class:r(e.n("simple-line"))},null,2)])],2)):(m(!0),f(Q,{key:1},R(e.pageList,(l,b)=>I((m(),f("li",{key:e.toNumber(l)+b,"item-mode":e.getMode(l,b),class:r(e.classes(e.n("item"),e.n("$-elevation--2"),[l===e.current&&!e.disabled,e.n("item--active")],[e.isHideEllipsis(l,b),e.n("item--hide")],[e.disabled,e.n("item--disabled")],[l===e.current&&e.disabled,e.n("item--disabled--active")])),onClick:T=>e.clickItem(l,b)},[B(g(l),1)],10,fe)),[[n,{disabled:e.disabled}]])),128)),I((m(),f("li",{class:r(e.classes(e.n("item"),e.n("next"),[e.current>=e.pageCount||e.disabled,e.n("item--disabled")],[e.simple,e.n("item--simple"),e.n("$-elevation--2")])),onClick:s[4]||(s[4]=l=>e.clickItem("next"))},[L(e.$slots,"next",{},()=>[y(i,{name:"chevron-right"})])],2)),[[n,{disabled:e.current>=e.pageCount||e.disabled}]]),e.showSizeChanger?(m(),f("li",{key:2,class:r(e.classes(e.n("size"),[e.disabled,e.n("item--disabled")]))},[y(c,{show:e.menuVisible,"onUpdate:show":s[6]||(s[6]=l=>e.menuVisible=l),"offset-x":-4},{menu:F(()=>[(m(!0),f(Q,null,R(e.sizeOption,(l,b)=>I((m(),ue(C,{class:r(e.classes(e.n("list"),[e.size===l,e.n("list--active")])),key:b,onClick:T=>e.clickSize(l)},{default:F(()=>[B(g(l)+g(e.pack.paginationItem)+" / "+g(e.pack.paginationPage),1)]),_:2},1032,["class","onClick"])),[[n]])),128))]),default:F(()=>[w("div",{class:r(e.classes(e.n("size--open"),[e.current<=1||e.disabled,e.n("size--open--disabled")])),onClick:s[5]||(s[5]=(...l)=>e.showMenu&&e.showMenu(...l))},[w("span",null,g(e.size)+g(e.pack.paginationItem)+" / "+g(e.pack.paginationPage),1),y(i,{class:r(e.n("size--open-icon")),"var-pagination-cover":"",name:"menu-down"},null,8,["class"])],2)]),_:1},8,["show"])],2)):q("",!0),e.showQuickJumper&&!e.simple?(m(),f("li",{key:3,class:r(e.classes(e.n("quickly"),[e.disabled,"item--disabled"]))},[B(g(e.pack.paginationJump)+" ",1),y(p,{modelValue:e.inputValue,"onUpdate:modelValue":s[7]||(s[7]=l=>e.inputValue=l),disabled:e.disabled,"var-pagination-cover":"",onBlur:s[8]||(s[8]=l=>e.setPage("quick",e.inputValue,l)),onKeydown:s[9]||(s[9]=O(l=>e.setPage("quick",e.inputValue,l),["enter"]))},null,8,["modelValue","disabled"])],2)):q("",!0),e.totalText?(m(),f("li",{key:4,class:r(e.n("total"))},g(e.totalText),3)):q("",!0)],2)}const D=ne(ve,[["render",ge]]);D.install=function(e){e.component(D.name,D)};export{D as P};
