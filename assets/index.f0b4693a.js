import{d as V,a as G,b as A,w as T,o as M,_ as L,p as C,D as R,E as Y,f as y,h as K,M as k,N as p,O as v,P as _,Q as B,i as h,j as z,R as I,q as g,S,m as w,G as Z,T as H,r as $,V as Q,W,X,Y as J,Z as P,C as x}from"./vue-router.esm-bundler.5eeb4635.js";import{p as f,L as ee}from"./index.d4fd983f.js";import{I as ne}from"./index.0768f7d6.js";import{u as oe}from"./zIndex.9362c405.js";import{p as m,e as l,c as q,g as te,m as ae}from"./components.f64aae3f.js";import{c as se}from"./index.fb6ef4d0.js";import{u as ie}from"./lock.6cdc3af1.js";function re(e){return["top","center","bottom"].includes(e)}function le(e){return E.includes(e)}const F={type:{type:String,validator:le},position:{type:String,default:"top",validator:re},content:{type:String},contentClass:{type:String},duration:{type:Number,default:3e3},vertical:{type:Boolean,default:!1},loadingType:m(f,"type"),loadingSize:m(f,"size"),loadingRadius:m(f,"radius"),loadingColor:{...m(f,"color"),default:"currentColor"},lockScroll:{type:Boolean,default:!1},show:{type:Boolean,default:!1},teleport:{type:String,default:"body"},forbidClick:{type:Boolean,default:!1},onOpen:{type:Function,default:()=>{}},onOpened:{type:Function,default:()=>{}},onClose:{type:Function,default:()=>{}},onClosed:{type:Function,default:()=>{}},"onUpdate:show":{type:Function},_update:{type:String}},{n:ce,classes:de}=q("snackbar"),ue={success:"checkbox-marked-circle",warning:"warning",info:"information",error:"error",loading:""},pe=V({name:"VarSnackbarCore",components:{VarLoading:ee,VarIcon:ne},props:F,setup(e){const n=G(null),{zIndex:o}=oe(()=>e.show,1);ie(()=>e.show,()=>e.lockScroll);const t=A(()=>e.type==="loading"||e.forbidClick),s=A(()=>e.type?ue[e.type]:""),i=()=>{n.value=setTimeout(()=>{e.type!=="loading"&&l(e["onUpdate:show"],!1)},e.duration)};return T(()=>e.show,r=>{r?(l(e.onOpen),i()):r===!1&&(clearTimeout(n.value),l(e.onClose))}),T(()=>e._update,()=>{clearTimeout(n.value),i()}),M(()=>{e.show&&(l(e.onOpen),i())}),{SNACKBAR_TYPE:E,n:ce,classes:de,zIndex:o,iconName:s,isForbidClick:t}}});function fe(e,n,o,t,s,i){const r=C("var-icon"),b=C("var-loading");return R((y(),K("div",{class:p(e.n()),style:I({pointerEvents:e.isForbidClick?"auto":"none",zIndex:e.zIndex})},[k("div",{class:p(e.classes(e.n("wrapper"),e.n(`wrapper-${e.position}`),e.n("$-elevation--4"),[e.vertical,e.n("vertical")],[e.type&&e.SNACKBAR_TYPE.includes(e.type),e.n(`wrapper-${e.type}`)])),style:I({zIndex:e.zIndex})},[k("div",{class:p([e.n("content"),e.contentClass])},[v(e.$slots,"default",{},()=>[_(B(e.content),1)])],2),k("div",{class:p(e.n("action"))},[e.iconName?(y(),h(r,{key:0,name:e.iconName},null,8,["name"])):z("",!0),e.type==="loading"?(y(),h(b,{key:1,type:e.loadingType,size:e.loadingSize,color:e.loadingColor,radius:e.loadingRadius},null,8,["type","size","color","radius"])):z("",!0),v(e.$slots,"action")],2)],6)],6)),[[Y,e.show]])}const U=L(pe,[["render",fe]]);const{n:me}=q("snackbar"),ye=V({name:"VarSnackbar",components:{VarSnackbarCore:U},props:F,setup(){const{disabled:e}=te();return{n:me,disabled:e}}});function ve(e,n,o,t,s,i){const r=C("var-snackbar-core");return y(),h(H,{to:e.teleport,disabled:e.disabled},[g(Z,{name:`${e.n()}-fade`,onAfterEnter:e.onOpened,onAfterLeave:e.onClosed},{default:S(()=>[g(r,w(e.$props,{class:e.n("transition")}),{action:S(()=>[v(e.$slots,"action")]),default:S(()=>[v(e.$slots,"default",{},()=>[_(B(e.content),1)])]),_:3},16,["class"])]),_:3},8,["name","onAfterEnter","onAfterLeave"])],8,["to","disabled"])}const c=L(ye,[["render",ve]]);function ge(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!x(e)}const E=["loading","success","warning","info","error"];let N=0,O=!1,j,d=!1,a=$([]);const be={type:void 0,content:"",position:"top",duration:3e3,vertical:!1,contentClass:void 0,loadingType:"circle",loadingSize:"normal",lockScroll:!1,teleport:"body",forbidClick:!1,onOpen:()=>{},onOpened:()=>{},onClose:()=>{},onClosed:()=>{}},ke={name:"var-snackbar-fade",tag:"div",class:"var-transition-group"},Se={setup(){return()=>{const e=a.map(({id:o,reactiveSnackOptions:t,_update:s})=>{const i=document.querySelector(".var-transition-group");t.forbidClick||t.type==="loading"?i.classList.add("var-pointer-auto"):i.classList.remove("var-pointer-auto"),d&&(t.position="top");const b={position:d?"relative":"absolute",...$e(t.position)};return g(U,w(t,{key:o,style:b,"data-id":o,_update:s,show:t.show,"onUpdate:show":D=>t.show=D}),null)}),n=se.zIndex;return g(J,w(ke,{style:{zIndex:n},onAfterEnter:Ce,onAfterLeave:he}),ge(e)?e:{default:()=>[e]})}}},u=function(e){const n=W(e)||X(e)?{content:String(e)}:e,o=$({...be,...n});o.show=!0,O||(O=!0,j=ae(Se).unmountInstance);const{length:t}=a,s={id:N++,reactiveSnackOptions:o};if(t===0||d)we(s);else{const i=`update-${N}`;Oe(o,i)}return{clear(){!d&&a.length?a[0].reactiveSnackOptions.show=!1:o.show=!1}}};E.forEach(e=>{u[e]=n=>(Q(n)?n.type=e:n={content:n,type:e},u(n))});u.install=function(e){e.component(c.name,c)};u.allowMultiple=function(e=!1){e!==d&&(a.forEach(n=>{n.reactiveSnackOptions.show=!1}),d=e)};u.clear=function(){a.forEach(e=>{e.reactiveSnackOptions.show=!1})};u.Component=c;function Ce(e){const n=e.getAttribute("data-id"),o=a.find(t=>t.id===P(n));o&&l(o.reactiveSnackOptions.onOpened)}function he(e){e.parentElement&&e.parentElement.classList.remove("var-pointer-auto");const n=e.getAttribute("data-id"),o=a.find(s=>s.id===P(n));o&&(o.animationEnd=!0,l(o.reactiveSnackOptions.onClosed)),a.every(s=>s.animationEnd)&&(l(j),a=$([]),O=!1)}function we(e){a.push(e)}function Oe(e,n){const[o]=a;o.reactiveSnackOptions={...o.reactiveSnackOptions,...e},o._update=n}function $e(e="top"){return e==="bottom"?{[e]:"5%"}:{top:e==="top"?"5%":"45%"}}c.install=function(e){e.component(c.name,c)};export{u as S};
