import{S as te}from"./index-5a10b104.js";import{d as X,a as r,b as _,E as oe,_ as H,f as v,i as U,S as b,M as Y,O as F,P as T,Q as u,m as ae,aE as le,w as re,o as K,e as ie,Z as L,V as ce,h as k,F as q,ai as j,N as w,R as P,ac as de,az as ue,ap as m,q as D}from"./vue-router.esm-bundler-aeae2b6c.js";import{u as fe,a as pe,b as ve,e as he,c as Q,d as M,f as z}from"./components-b6fa4b7a.js";import{e as me}from"./shared-bd251288.js";import{t as ye,d as R,b as _e,f as be,c as ke,e as Ce,n as ge,r as Ie}from"./elements-3b8faeb1.js";import{C as V}from"./index-388deb4b.js";import{d as Te}from"./index-a0d4b3bb.js";import{u as xe,c as Ne,a as Z,_ as Be,b as Ee}from"./index-12056b48.js";import"./index-310428ec.js";const G=Symbol("INDEX_BAR_BIND_INDEX_ANCHOR_KEY"),J=Symbol("INDEX_BAR_COUNT_INDEX_ANCHOR_KEY");function Ae(){const{bindChildren:e,childProviders:l}=fe(G),{length:n}=pe(J);return{length:n,indexAnchors:l,bindIndexAnchors:e}}function $e(){const{parentProvider:e,bindParent:l}=ve(G),{index:n}=he(J);if(!e||!l)throw Error('[Varlet] IndexAnchor: You should use this component in "IndexBar"');return{index:n,indexBar:e,bindIndexBar:l}}const Se={index:{type:[Number,String]}},{n:we,classes:De}=Q("index-anchor"),ze=X({name:"VarIndexAnchor",components:{VarSticky:te},inheritAttrs:!1,props:Se,setup(e){const{index:l,indexBar:n,bindIndexBar:d}=$e(),i=r(0),s=r(!1),a=_(()=>e.index),o=r(null),{active:f,sticky:N,cssMode:B,stickyOffsetTop:y,zIndex:C}=n;return d({index:l,name:a,ownTop:i,setOwnTop:()=>{o.value&&(i.value=o.value.$el?o.value.$el.offsetTop:o.value.offsetTop)},setDisabled:g=>{s.value=g}}),{n:we,classes:De,name:a,anchorEl:o,active:f,sticky:N,zIndex:C,disabled:s,cssMode:B,stickyOffsetTop:y,Transition:oe}}});function Oe(e,l,n,d,i,s){return v(),U(le(e.sticky?e.n("$-sticky"):e.Transition),{"offset-top":e.sticky?e.stickyOffsetTop:null,"z-index":e.sticky?e.zIndex:null,disabled:e.disabled&&!e.cssMode,"css-mode":e.cssMode,ref:"anchorEl"},{default:b(()=>[Y("div",ae({class:e.n()},e.$attrs),[F(e.$slots,"default",{},()=>[T(u(e.name),1)])],16)]),_:3},8,["offset-top","z-index","disabled","css-mode"])}const Pe=H(ze,[["render",Oe]]),Le={sticky:{type:Boolean,default:!0},stickyOffsetTop:{type:[String,Number],default:0},cssMode:{type:Boolean,default:!1},hideList:{type:Boolean,default:!1},zIndex:{type:[Number,String],default:1},highlightColor:{type:String},duration:{type:[Number,String],default:0},onClick:M(),onChange:M()},{n:Me,classes:Re}=Q("index-bar"),Ve=X({name:"VarIndexBar",props:Le,setup(e){const{length:l,indexAnchors:n,bindIndexAnchors:d}=Ae(),i=r(""),s=r(null),a=r(null),o=r([]),f=r(),N=_(()=>e.sticky),B=_(()=>e.cssMode),y=_(()=>ye(e.stickyOffsetTop)),C=_(()=>e.zIndex);d({active:f,sticky:N,cssMode:B,stickyOffsetTop:y,zIndex:C});const E=t=>{const c=ce(t)?t.name.value:t;c===f.value||c===void 0||(f.value=c,z(e.onChange,c))},A=()=>{const t=be(s.value),c=s.value===window?document.body.scrollHeight:s.value.scrollHeight,{offsetTop:$}=a.value;n.forEach((p,h)=>{const S=p.ownTop.value,I=t-S+y.value-$,ne=h===n.length-1?c:n[h+1].ownTop.value-p.ownTop.value;I>=0&&I<ne&&!i.value&&(h&&!e.cssMode&&n[h-1].setDisabled(!0),p.setDisabled(!1),E(p))})},g=async(t,c)=>{const{offsetTop:$}=a.value;if(c&&z(e.onClick,t),t===f.value)return;const p=n.find(({name:I})=>t===I.value);if(!p)return;const h=p.ownTop.value-y.value+$,S=ke(s.value);i.value=t,E(t),await Ce(s.value,{left:S,top:h,animation:me,duration:L(e.duration)}),ge(()=>{i.value=""})},se=t=>{Ie(()=>g(t))};return re(()=>l.value,async()=>{await R(),n.forEach(({name:t,setOwnTop:c})=>{t.value&&o.value.push(t.value),c()})}),K(async()=>{await R(),s.value=_e(a.value),s.value.addEventListener("scroll",A)}),ie(()=>{z(s.value.removeEventListener,"scroll",A)}),{n:Me,classes:Re,barEl:a,active:f,zIndex:C,anchorNameList:o,toNumber:L,scrollTo:se,anchorClick:g}}});const Xe=["onClick"];function He(e,l,n,d,i,s){return v(),k("div",{class:w(e.n()),ref:"barEl"},[F(e.$slots,"default"),Y("ul",{class:w(e.n("anchor-list")),style:P({zIndex:e.toNumber(e.zIndex)+2,display:e.hideList?"none":"block"})},[(v(!0),k(q,null,j(e.anchorNameList,a=>(v(),k("li",{key:a,class:w(e.classes(e.n("anchor-item"),[e.active===a,e.n("anchor-item--active")])),style:P({color:e.active===a&&e.highlightColor?e.highlightColor:""}),onClick:o=>e.anchorClick(a,!0)},u(a),15,Xe))),128))],6)],2)}const x=H(Ve,[["render",He]]);x.install=function(e){e.component(x.name,x)};const Ue={title:"标题",text:"文本"},Ye={title:"Title",text:"Text"},{add:W,use:Fe,pack:O,packs:ns,merge:ts}=xe(),Ke=e=>{Ne(e),Fe(e)};Z("zh-CN",Be);Z("en-US",Ee);W("zh-CN",Ue);W("en-US",Ye);const os={setup(e){const l=r([]),n=r("#e7edf7"),d=r("#2e67ba");K(()=>{for(let s=0;s<26;s++)l.value.push(String.fromCharCode(65+s))});const i=s=>{console.log(s)};return de(Ke),ue(Te,s=>{n.value=s==="darkTheme"?"rgb(41, 42, 45)":"#e7edf7",d.value=s==="darkTheme"?"#3980e8":"#2e67ba"}),(s,a)=>(v(),U(m(x),{onChange:i,duration:"300","sticky-offset-top":"14.4vw"},{default:b(()=>[(v(!0),k(q,null,j(l.value,o=>(v(),k("div",{key:o},[D(Pe,{index:o,class:"var-index-anchor__example",style:P({background:n.value,color:d.value})},{default:b(()=>[T(u(m(O).title)+" "+u(o),1)]),_:2},1032,["index","style"]),D(m(V),null,{default:b(()=>[T(u(o)+" "+u(m(O).text),1)]),_:2},1024),D(m(V),null,{default:b(()=>[T(u(o)+" "+u(m(O).text),1)]),_:2},1024)]))),128))]),_:1}))}};export{os as default};
