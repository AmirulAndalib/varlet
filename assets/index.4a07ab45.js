import{I as T}from"./index.2b3dacb8.js";import{F as W,u as P}from"./provide.e985b336.js";import{R as A}from"./index.f8492b74.js";import{a as E,b as p,c as L}from"./components.2481c71b.js";import{t as f}from"./elements.92736b4e.js";import{t as c}from"./shared.506a394a.js";import{_ as X}from"./elevation.229458c1.js";import{d as j,z as q,e as k,f as G,o as b,c as v,a as H,F as z,k as J,w as K,n as F,p as I,i as B}from"./vendor.49f89f0d.js";const O={modelValue:{type:[String,Number],default:0},count:{type:[String,Number],default:5},color:{type:String},icon:{type:String,default:"star"},emptyColor:{type:String},emptyIcon:{type:String,default:"star-outline"},size:{type:[String,Number],default:"24"},gap:{type:[String,Number],default:"2"},namespace:{type:String},half:{type:Boolean,default:!1},halfIcon:{type:String,default:"star-half-full"},disabled:{type:Boolean,default:!1},disabledColor:{type:String},readonly:{type:Boolean,default:!1},ripple:{type:Boolean,default:!0},rules:{type:Array},onChange:{type:Function},"onUpdate:modelValue":{type:Function}};const{n:u}=L("rate"),Q=j({name:"VarRate",components:{VarIcon:T,VarFormDetails:W},directives:{Ripple:A},props:O,setup(e){const{form:t,bindForm:S}=P(),{errorMessage:y,validateWithTrigger:V,validate:N,resetValidation:i}=E(),g=a=>{const{count:o,size:n,gap:l}=e;return{color:d(a).color,marginRight:a!==c(o)?f(l):0,width:f(n),height:f(n),borderRadius:"50%"}},h=a=>{const{type:o,color:n}=d(a);return{[u("content")]:!0,[u("--disabled")]:t==null?void 0:t.disabled.value,[u("--error")]:y.value,[u("--primary")]:o!=="empty"&&!n}},r=a=>{const{type:o}=d(a),{icon:n,halfIcon:l,emptyIcon:s}=e;return o==="full"?n:o==="half"?l:s},d=a=>{const{modelValue:o,disabled:n,disabledColor:l,color:s,half:w,emptyColor:M}=e;let m;return n||(t==null?void 0:t.disabled.value)?m=l:s&&(m=s),a<=c(o)?{type:"full",score:a,color:m}:w&&a<=c(o)+.5?{type:"half",score:a,color:m}:{type:"empty",score:a,color:n||(t==null?void 0:t.disabled.value)?l:M}},D=(a,o)=>{if(e.half){const{offsetWidth:n}=o.target;o.offsetX<=Math.floor(n/2)&&(a-=.5)}p(e["onUpdate:modelValue"],a)},_=()=>N(e.rules,c(e.modelValue)),U=()=>q(()=>V(["onChange"],"onChange",e.rules,e.modelValue)),$=(a,o)=>{const{readonly:n,disabled:l,onChange:s}=e;n||l||(t==null?void 0:t.disabled.value)||(t==null?void 0:t.readonly.value)||(D(a,o),p(s,a),U())},R=()=>{p(e["onUpdate:modelValue"],0),i()};return p(S,{reset:R,validate:_,resetValidation:i}),{errorMessage:y,formDisabled:t==null?void 0:t.disabled,formReadonly:t==null?void 0:t.readonly,getStyle:g,getClass:h,getIconName:r,handleClick:$,reset:R,validate:_,resetValidation:i,toSizeUnit:f,toNumber:c,n:u}}}),Y=["onClick"];function Z(e,t,S,y,V,N){const i=k("var-icon"),g=k("var-form-details"),h=G("ripple");return b(),v(z,null,[H("div",{class:I(e.n())},[(b(!0),v(z,null,J(e.toNumber(e.count),r=>K((b(),v("div",{key:r,style:F(e.getStyle(r)),class:I(e.getClass(r)),onClick:d=>e.handleClick(r,d)},[B(i,{transition:0,namespace:e.namespace,name:e.getIconName(r),style:F({fontSize:e.toSizeUnit(e.size)})},null,8,["namespace","name","style"])],14,Y)),[[h,{disabled:e.formReadonly||e.readonly||e.formDisabled||e.disabled||!e.ripple}]])),128))],2),B(g,{"error-message":e.errorMessage},null,8,["error-message"])],64)}var C=X(Q,[["render",Z]]);C.install=function(e){e.component(C.name,C)};export{C as R};
