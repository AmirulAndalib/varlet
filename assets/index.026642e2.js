import{R as O}from"./index.bee8a319.js";import{I as A}from"./index.32f19c73.js";import{B as J}from"./index.ed461ff0.js";import{d as K,a as o,b as M,w as Y,_ as Z,s as H,ab as q,f as a,h as l,j as G,H as t,K as g,J as r,l as R,k as d,n as Q,N as B,t as F,P as X,ac as _}from"./elevation.291695bd.js";import{t as h,h as x}from"./elements.7b8202fe.js";import{c as ee,a as oe}from"./components.22d2a65f.js";import{u as te}from"./zIndex.253d25f2.js";import{u as ae}from"./lock.64344722.js";function le(e){return["fill","contain","cover","none","scale-down"].includes(e)}const ie={src:{type:String},fit:{type:String,validator:le,default:"cover"},height:{type:[String,Number]},imageHeight:{type:[String,Number]},imageWidth:{type:[String,Number]},layout:{type:String,default:"column"},floating:{type:Boolean,default:!1},"onUpdate:floating":{type:Function},floatingDuration:{type:Number,default:250},alt:{type:String},title:{type:String},subtitle:{type:String},description:{type:String},elevation:{type:[Number,String]},ripple:{type:Boolean,default:!1},onClick:{type:Function}};const{n:ne,classes:se}=ee("card"),re=500,ue=K({name:"VarCard",directives:{Ripple:O},components:{VarIcon:A,VarButton:J},props:ie,setup(e){const c=o(null),N=o(null),v=o("auto"),f=o("auto"),p=o("100%"),u=o("100%"),i=o("auto"),n=o("auto"),s=o(void 0),y=o("hidden"),w=o("0px"),b=o("0"),{zIndex:V}=te(()=>e.floating,1),$=M(()=>e.layout==="row"),k=o(!1),S=o(!1);ae(()=>e.floating,()=>$);let C="auto",D="auto",z=null;const m=o(null),L=async()=>{clearTimeout(m.value),clearTimeout(z),m.value=null,m.value=setTimeout(async()=>{const{width:T,height:U,left:E,top:j}=c.value.getBoundingClientRect();v.value=h(T),f.value=h(U),p.value=v.value,u.value=f.value,i.value=h(j),n.value=h(E),s.value="fixed",C=i.value,D=n.value,k.value=!0,await x(),i.value="0",n.value="0",p.value="100vw",u.value="100vh",w.value="auto",b.value="1",y.value="auto",S.value=!0},e.ripple?re:0)},W=()=>{clearTimeout(z),clearTimeout(m.value),m.value=null,p.value=v.value,u.value=f.value,i.value=C,n.value=D,w.value="0px",b.value="0",k.value=!1,z=setTimeout(()=>{v.value="auto",f.value="auto",p.value="100%",u.value="100%",i.value="auto",n.value="auto",C="auto",D="auto",y.value="hidden",s.value=void 0,S.value=!1},e.floatingDuration)},P=()=>{oe(e["onUpdate:floating"],!1)};return Y(()=>e.floating,T=>{$.value||Q(()=>{T?L():W()})},{immediate:!0}),{n:ne,classes:se,toSizeUnit:h,card:c,cardFloater:N,holderWidth:v,holderHeight:f,floater:m,floaterWidth:p,floaterHeight:u,floaterTop:i,floaterLeft:n,floaterPosition:s,floaterOverflow:y,contentHeight:w,opacity:b,zIndex:V,isRow:$,close:P,showToolBar:k,floated:S}}}),de=["src","alt"];function ve(e,c,N,v,f,p){const u=H("var-icon"),i=H("var-button"),n=q("ripple");return a(),l("div",{ref:"card",class:t(e.classes(e.n(),[e.isRow,e.n("--layout-row")])),onClick:c[0]||(c[0]=(...s)=>e.onClick&&e.onClick(...s))},[G((a(),l("div",{ref:"cardFloater",class:t(e.classes(e.n("floater"),[e.elevation,`var-elevation--${e.elevation}`,"var-elevation--1"])),style:g({width:e.floaterWidth,height:e.floaterHeight,top:e.floaterTop,left:e.floaterLeft,overflow:e.floaterOverflow,position:e.floaterPosition,borderRadius:e.floating?"0px":void 0,zIndex:e.floated?e.zIndex:void 0,transition:e.floated?`background-color ${e.floatingDuration}ms, border-radius ${e.floatingDuration}ms, width ${e.floatingDuration}ms, height ${e.floatingDuration}ms, top ${e.floatingDuration}ms, left ${e.floatingDuration}ms`:void 0})},[r(e.$slots,"image",{},()=>{var s;return[e.src?(a(),l("img",{key:0,class:t(e.n("image")),style:g({objectFit:e.fit,height:e.toSizeUnit((s=e.imageHeight)!=null?s:e.height),width:e.toSizeUnit(e.imageWidth)}),src:e.src,alt:e.alt},null,14,de)):d("v-if",!0)]}),R("div",{class:t(e.n("container"))},[r(e.$slots,"title",{},()=>[e.title?(a(),l("div",{key:0,class:t(e.n("title"))},B(e.title),3)):d("v-if",!0)]),r(e.$slots,"subtitle",{},()=>[e.subtitle?(a(),l("div",{key:0,class:t(e.n("subtitle"))},B(e.subtitle),3)):d("v-if",!0)]),r(e.$slots,"description",{},()=>[e.description?(a(),l("div",{key:0,class:t(e.n("description"))},B(e.description),3)):d("v-if",!0)]),e.$slots.extra?(a(),l("div",{key:0,class:t(e.n("footer"))},[r(e.$slots,"extra")],2)):d("v-if",!0),e.$slots.content&&!e.isRow?(a(),l("div",{key:1,class:t(e.n("content")),style:g({height:e.contentHeight,opacity:e.opacity,transition:`opacity ${e.floatingDuration*2}ms`})},[r(e.$slots,"content")],6)):d("v-if",!0)],2),e.showToolBar?(a(),l("div",{key:0,class:t(e.classes(e.n("toolbar"),"var--box")),style:g({zIndex:e.zIndex,opacity:e.opacity,transition:`opacity ${e.floatingDuration*2}ms`})},[r(e.$slots,"toolbar-close",{},()=>[F(i,{size:"large",round:"",class:t(e.classes(e.n("toolbar-close"),"var-elevation--6")),onClick:_(e.close,["stop"])},{default:X(()=>[F(u,{name:"window-close",size:"24px"})]),_:1},8,["class","onClick"])]),r(e.$slots,"toolbar-extra")],6)):d("v-if",!0)],6)),[[n,{disabled:!e.ripple||e.floater}]]),R("div",{class:t(e.n("holder")),style:g({width:e.holderWidth,height:e.holderHeight})},null,6)],2)}var I=Z(ue,[["render",ve]]);I.install=function(e){e.component(I.name,I)};export{I as C};
